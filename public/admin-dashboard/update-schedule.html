<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Dashboard - TrafficIQ</title>
  <link rel="stylesheet" href="../css/styles.css">
  <link rel="stylesheet" href="../css/dashboard.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap">
  <!-- Add Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- Add Tailwind CSS and Font Awesome for update-schedule-content -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
  <style>
      /* Updated Dashboard Styles */
      :root {
          --sidebar-width: 260px;
          --header-height: 70px;
          --sidebar-bg: #f8f9fa;
          --sidebar-hover: #e9ecef;
          --sidebar-active: #e6f0ff;
          --sidebar-border: #e0e0e0;
          
          /* Status colors */
          --status-green: #28a745;
          --status-red: #dc3545;
          --status-yellow: #ffc107;
          --status-blue: #0066cc;
          --status-purple: #6f42c1;
          --status-orange: #fd7e14;
          
          /* Alert colors */
          --alert-critical: #dc3545;
          --alert-warning: #ffc107;
          --alert-info: #0dcaf0;
          --alert-success: #28a745;
      }

      .dashboard-container {
          display: flex;
          min-height: 100vh;
          background-color: #f5f7fa;
      }

      /* Sidebar Styles */
      .sidebar {
          width: var(--sidebar-width);
          background-color: white;
          border-right: 1px solid var(--sidebar-border);
          display: flex;
          flex-direction: column;
          position: fixed;
          top: 0;
          left: 0;
          bottom: 0;
          z-index: 100;
          transition: transform 0.3s ease;
          overflow-y: auto;
      }

      .sidebar-header {
          padding: 20px;
          border-bottom: 1px solid var(--sidebar-border);
          display: flex;
          align-items: center;
          justify-content: space-between;
      }

      .sidebar-header h1 {
          font-size: 1.5rem;
          font-weight: 700;
          color: var(--primary-color);
          margin: 0;
      }

      .admin-badge {
          background-color: var(--primary-color);
          color: white;
          font-size: 0.7rem;
          font-weight: 600;
          padding: 3px 8px;
          border-radius: 10px;
          text-transform: uppercase;
      }

      .sidebar-nav {
          flex: 1;
          overflow-y: auto;
          padding: 20px 0;
      }

      .sidebar-nav ul {
          list-style: none;
          padding: 0;
          margin: 0;
          display: flex;
          flex-direction: column;
      }

      .sidebar-nav li {
          margin-bottom: 5px;
          width: 100%;
      }

      .sidebar-nav a {
          display: flex;
          align-items: center;
          padding: 12px 20px;
          color: var(--text-color);
          text-decoration: none;
          transition: all 0.2s ease;
          border-radius: 6px;
          margin: 0 10px;
          font-weight: 500;
          width: calc(100% - 20px);
      }

      .sidebar-nav a:hover {
          background-color: var(--sidebar-hover);
      }

      .sidebar-nav li.active a {
          background-color: var(--sidebar-active);
          color: var(--primary-color);
          font-weight: 600;
      }

      .sidebar-nav .icon {
          width: 20px;
          height: 20px;
          margin-right: 12px;
          color: currentColor;
          flex-shrink: 0;
      }

      .sidebar-nav span {
          white-space: nowrap;
          overflow: hidden;
          text-overflow: ellipsis;
      }

      .sidebar-footer {
          padding: 20px;
          border-top: 1px solid var(--sidebar-border);
      }

      .user-profile {
          display: flex;
          align-items: center;
          padding: 10px;
          border-radius: 6px;
          margin-bottom: 15px;
          text-decoration: none;
          color: var(--text-color);
      }

      .user-profile:hover {
          background-color: var(--sidebar-hover);
      }

      .avatar {
          width: 40px;
          height: 40px;
          border-radius: 50%;
          background-color: var(--primary-light);
          color: var(--primary-color);
          display: flex;
          align-items: center;
          justify-content: center;
          font-weight: 600;
          margin-right: 12px;
          flex-shrink: 0;
      }

      .avatar.admin {
          background-color: var(--primary-color);
          color: white;
      }

      .user-info {
          flex: 1;
      }

      .user-info h4 {
          margin: 0;
          font-size: 0.9rem;
          font-weight: 600;
      }

      .user-info p {
          margin: 0;
          font-size: 0.8rem;
          color: var(--text-light);
      }

      .logout-btn {
          display: flex;
          align-items: center;
          padding: 10px;
          border-radius: 6px;
          color: #dc3545;
          text-decoration: none;
          font-weight: 500;
      }

      .logout-btn:hover {
          background-color: #ffebee;
          color: #dc3545;
      }

      .logout-btn .icon {
          width: 18px;
          height: 18px;
          margin-right: 10px;
          flex-shrink: 0;
      }

      /* Main Content Styles */
      .main-content {
          flex: 1;
          margin-left: var(--sidebar-width);
          min-height: 100vh;
          width: calc(100% - var(--sidebar-width));
          box-sizing: border-box;
      }

      .dashboard-header {
          height: var(--header-height);
          background-color: white;
          border-bottom: 1px solid var(--sidebar-border);
          display: flex;
          align-items: center;
          justify-content: space-between;
          padding: 0 30px;
          position: sticky;
          top: 0;
          z-index: 99;
      }

      .dashboard-header h2 {
          font-size: 1.5rem;
          font-weight: 600;
          margin: 0;
      }

      .header-actions {
          display: flex;
          align-items: center;
          gap: 15px;
      }

      .search-bar {
          position: relative;
          width: 300px;
      }

      .search-bar input {
          width: 100%;
          padding: 10px 15px;
          padding-right: 40px;
          border: 1px solid var(--border-color);
          border-radius: 6px;
          font-size: 0.9rem;
          transition: all 0.2s ease;
      }

      .search-bar input:focus {
          outline: none;
          border-color: var(--primary-color);
          box-shadow: 0 0 0 2px rgba(0, 102, 204, 0.1);
      }

      .search-bar button {
          position: absolute;
          right: 10px;
          top: 50%;
          transform: translateY(-50%);
          background: none;
          border: none;
          cursor: pointer;
          color: var(--text-light);
      }

      .search-bar button svg {
          width: 18px;
          height: 18px;
      }

      .notification-btn {
          position: relative;
          background: none;
          border: none;
          cursor: pointer;
          width: 40px;
          height: 40px;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          transition: all 0.2s ease;
      }

      .notification-btn:hover {
          background-color: var(--sidebar-hover);
      }

      .notification-btn svg {
          width: 20px;
          height: 20px;
          color: var(--text-color);
      }

      .badge {
          position: absolute;
          top: 0;
          right: 0;
          background-color: var(--alert-critical);
          color: white;
          font-size: 0.7rem;
          font-weight: 600;
          width: 18px;
          height: 18px;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
      }

      .menu-toggle {
          display: none;
          cursor: pointer;
      }

      .menu-toggle svg {
          width: 24px;
          height: 24px;
      }

      .dashboard-content {
          padding: 30px;
          width: 100%;
          box-sizing: border-box;
      }

      /* Stats Grid */
      .stats-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
          gap: 20px;
          margin-bottom: 30px;
      }

      .stat-card {
          background-color: white;
          border-radius: 10px;
          padding: 20px;
          display: flex;
          align-items: center;
          box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
      }

      .stat-icon {
          width: 50px;
          height: 50px;
          border-radius: 10px;
          display: flex;
          align-items: center;
          justify-content: center;
          margin-right: 15px;
          flex-shrink: 0;
      }

      .stat-icon svg {
          width: 24px;
          height: 24px;
          color: white;
      }

      .stat-icon.blue {
          background-color: var(--status-blue);
      }

      .stat-icon.green {
          background-color: var(--status-green);
      }

      .stat-icon.orange {
          background-color: var(--status-orange);
      }

      .stat-icon.purple {
          background-color: var(--status-purple);
      }

      .stat-info {
          flex: 1;
      }

      .stat-info h3 {
          font-size: 0.9rem;
          font-weight: 500;
          color: var(--text-light);
          margin: 0 0 5px 0;
      }

      .stat-value {
          font-size: 1.5rem;
          font-weight: 700;
          margin: 0 0 5px 0;
      }

      .stat-change {
          font-size: 0.8rem;
          margin: 0;
      }

      .stat-change.positive {
          color: var(--status-green);
      }

      .stat-change.negative {
          color: var(--alert-critical);
      }

      /* Dashboard Cards */
      .dashboard-row {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
          gap: 20px;
          margin-bottom: 30px;
      }

      .dashboard-card {
          background-color: white;
          border-radius: 10px;
          box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
          overflow: hidden;
      }

      .dashboard-card.large {
          grid-column: 1 / -1;
      }

      .card-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 15px 20px;
          border-bottom: 1px solid var(--sidebar-border);
      }

      .card-header h3 {
          font-size: 1.1rem;
          font-weight: 600;
          margin: 0;
      }

      .card-actions {
          display: flex;
          align-items: center;
          gap: 10px;
      }

      .card-actions select {
          padding: 6px 10px;
          border: 1px solid var(--border-color);
          border-radius: 4px;
          font-size: 0.9rem;
          background-color: white;
      }

      .refresh-btn {
          background: none;
          border: none;
          cursor: pointer;
          width: 30px;
          height: 30px;
          border-radius: 4px;
          display: flex;
          align-items: center;
          justify-content: center;
          transition: all 0.2s ease;
      }

      .refresh-btn:hover {
          background-color: var(--sidebar-hover);
      }

      .refresh-btn svg {
          width: 16px;
          height: 16px;
          color: var(--text-light);
      }

      .view-all {
          font-size: 0.9rem;
          color: var(--primary-color);
          text-decoration: none;
          font-weight: 500;
      }

      .card-content {
          padding: 20px;
      }

      .chart-placeholder {
          width: 100%;
          border-radius: 6px;
          overflow: hidden;
      }

      .chart-placeholder img {
          width: 100%;
          display: block;
      }

      /* Intersection List */
      .intersection-list {
          list-style: none;
          padding: 0;
          margin: 0;
      }

      .intersection-list li {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 12px 0;
          border-bottom: 1px solid var(--sidebar-border);
      }

      .intersection-list li:last-child {
          border-bottom: none;
      }

      .intersection-info {
          display: flex;
          align-items: center;
      }

      .status {
          width: 10px;
          height: 10px;
          border-radius: 50%;
          margin-right: 10px;
          flex-shrink: 0;
      }

      .status.active {
          background-color: var(--status-green);
      }

      .status.inactive {
          background-color: var(--alert-critical);
      }

      .traffic-level {
          font-size: 0.8rem;
          font-weight: 600;
          padding: 4px 8px;
          border-radius: 4px;
      }

      .traffic-level.high {
          background-color: #ffebee;
          color: var(--alert-critical);
      }

      .traffic-level.medium {
          background-color: #fff8e1;
          color: #f57c00;
      }

      .traffic-level.low {
          background-color: #e8f5e9;
          color: var(--status-green);
      }

      /* Alerts List */
      .alerts-list {
          list-style: none;
          padding: 0;
          margin: 0;
      }

      .alert-item {
          display: flex;
          align-items: flex-start;
          padding: 15px 0;
          border-bottom: 1px solid var(--sidebar-border);
      }

      .alert-item:last-child {
          border-bottom: none;
      }

      .alert-icon {
          width: 36px;
          height: 36px;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          margin-right: 15px;
          flex-shrink: 0;
      }

      .alert-icon svg {
          width: 20px;
          height: 20px;
          color: white;
      }

      .alert-item.critical .alert-icon {
          background-color: var(--alert-critical);
      }

      .alert-item.warning .alert-icon {
          background-color: var(--alert-warning);
      }

      .alert-item.info .alert-icon {
          background-color: var(--alert-info);
      }

      .alert-item.success .alert-icon {
          background-color: var(--alert-success);
      }

      .alert-content {
          flex: 1;
      }

      .alert-content h4 {
          margin: 0 0 5px 0;
          font-size: 1rem;
          font-weight: 600;
      }

      .alert-content p {
          margin: 0 0 5px 0;
          font-size: 0.9rem;
          color: var(--text-light);
      }

      .alert-time {
          font-size: 0.8rem;
          color: var(--text-light);
      }

      /* Activity List */
      .activity-list {
          list-style: none;
          padding: 0;
          margin: 0;
      }

      .activity-item {
          display: flex;
          align-items: flex-start;
          padding: 15px 0;
          border-bottom: 1px solid var(--sidebar-border);
      }

      .activity-item:last-child {
          border-bottom: none;
      }

      .activity-avatar {
          width: 36px;
          height: 36px;
          border-radius: 50%;
          background-color: var(--primary-light);
          color: var(--primary-color);
          display: flex;
          align-items: center;
          justify-content: center;
          font-weight: 600;
          margin-right: 15px;
          flex-shrink: 0;
          font-size: 0.8rem;
      }

      .activity-content {
          flex: 1;
      }

      .activity-content h4 {
          margin: 0 0 5px 0;
          font-size: 1rem;
          font-weight: 600;
      }

      .activity-content p {
          margin: 0 0 5px 0;
          font-size: 0.9rem;
          color: var(--text-color);
      }

      .activity-time {
          font-size: 0.8rem;
          color: var(--text-light);
      }

      /* Responsive Styles */
      @media (max-width: 992px) {
          .stats-grid {
              grid-template-columns: repeat(2, 1fr);
          }
          
          .dashboard-row {
              grid-template-columns: 1fr;
          }
          
          .search-bar {
              width: 200px;
          }
      }

      @media (max-width: 768px) {
          .sidebar {
              transform: translateX(-100%);
          }
          
          .sidebar.active {
              transform: translateX(0);
          }
          
          .main-content {
              margin-left: 0;
              width: 100%;
          }
          
          .menu-toggle {
              display: block;
          }
          
          .dashboard-header {
              padding: 0 20px;
          }
          
          .stats-grid {
              grid-template-columns: 1fr;
          }
          
          .search-bar {
              display: none;
          }

          .update-schedule-content .main-content {
              padding: 20px;
          }
      }

      @media (max-width: 576px) {
          .dashboard-content {
              padding: 20px 15px;
          }
          
          .stat-card {
              padding: 15px;
          }
          
          .stat-value {
              font-size: 1.2rem;
          }
      }

      .chart-container {
          width: 100%;
          height: 300px;
          position: relative;
      }

      @media (max-width: 768px) {
          .chart-container {
              height: 250px;
          }
      }

      @media (max-width: 576px) {
          .chart-container {
              height: 200px;
          }
      }

      /* Base Styles */
      :root {
          --primary-color: #0066cc;
          --primary-dark: #0052a3;
          --primary-light: #e6f0ff;
          --secondary-color: #00aaff;
          --text-color: #333333;
          --text-light: #666666;
          --background-color: #ffffff;
          --background-alt: #f8f9fa;
          --border-color: #e0e0e0;
          --success-color: #28a745;
          --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
          --transition: all 0.3s ease;
      }

      * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
      }

      html {
          scroll-behavior: smooth;
      }

      body {
          font-family: 'Inter', sans-serif;
          line-height: 1.6;
          color: var(--text-color);
          background-color: var(--background-color);
      }

      /* Modified container class to use full width without centering margin */
      .container {
          width: 100%;
          max-width: 1200px;
          padding: 0 20px;
          box-sizing: border-box;
      }

      img {
          max-width: 100%;
          height: auto;
      }

      a {
          text-decoration: none;
          color: var(--primary-color);
          transition: var(--transition);
      }

      a:hover {
          color: var(--primary-dark);
      }

      ul {
          list-style: none;
      }

      .section-title {
          font-size: 2.5rem;
          font-weight: 700;
          text-align: center;
          margin-bottom: 3rem;
          color: var(--text-color);
      }

      /* Button Styles */
      .btn {
          display: inline-block;
          padding: 12px 24px;
          border-radius: 4px;
          font-weight: 600;
          text-align: center;
          cursor: pointer;
          transition: var(--transition);
          border: none;
      }

      .primary-btn {
          background-color: var(--primary-color);
          color: white;
      }

      .primary-btn:hover {
          background-color: var(--primary-dark);
          color: white;
          transform: translateY(-2px);
          box-shadow: var(--shadow);
      }

      .secondary-btn {
          background-color: transparent;
          color: var(--primary-color);
          border: 2px solid var(--primary-color);
      }

      .secondary-btn:hover {
          background-color: var(--primary-light);
          color: var(--primary-dark);
          transform: translateY(-2px);
      }

      /* Header Styles */
      header {
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          background-color: white;
          box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
          z-index: 1000;
          padding: 15px 0;
      }

      header .container {
          display: flex;
          justify-content: space-between;
          align-items: center;
      }

      .logo h1 {
          font-size: 1.8rem;
          font-weight: 700;
          color: var(--primary-color);
      }

      nav ul {
          display: flex;
          gap: 30px;
      }

      .nav ul li a {
          color: var(--text-color);
          font-weight: 500;
      }

      nav ul li a:hover {
          color: var(--primary-color);
      }

      .login-btn {
          background-color: var(--primary-color);
          color: white !important;
          padding: 8px 20px;
          border-radius: 4px;
          transition: var(--transition);
      }

      .login-btn:hover {
          background-color: var(--primary-dark);
          transform: translateY(-2px);
          box-shadow: var(--shadow);
      }

      .menu-toggle {
          display: none;
          flex-direction: column;
          gap: 5px;
          cursor: pointer;
      }

      .menu-toggle span {
          display: block;
          width: 25px;
          height: 3px;
          background-color: var(--text-color);
          transition: var(--transition);
      }

      /* Hero Section */
      .hero {
          padding: 150px 0 80px;
          background: linear-gradient(to bottom, var(--primary-light), white);
      }

      .hero .container {
          display: flex;
          align-items: center;
          gap: 40px;
      }

      .hero-content {
          flex: 1;
      }

      .hero-content h2 {
          font-size: 3rem;
          font-weight: 700;
          margin-bottom: 20px;
          color: var(--text-color);
          line-height: 1.2;
      }

      .hero-content p {
          font-size: 1.2rem;
          color: var(--text-light);
          margin-bottom: 30px;
      }

      .cta-buttons {
          display: flex;
          gap: 15px;
      }

      .hero-image {
          flex: 1;
          border-radius: 10px;
          overflow: hidden;
          box-shadow: var(--shadow);
      }

      /* Features Section */
      .features {
          padding: 80px 0;
          background-color: var(--background-color);
      }

      .features-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
          gap: 30px;
      }

      .feature-card {
          background-color: white;
          border-radius: 8px;
          padding: 30px;
          text-align: center;
          box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
          transition: var(--transition);
      }

      .feature-card:hover {
          transform: translateY(-10px);
          box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
      }

      .feature-icon {
          margin-bottom: 20px;
      }

      .feature-card h3 {
          font-size: 1.5rem;
          margin-bottom: 15px;
          color: var(--primary-color);
      }

      .feature-card p {
          color: var(--text-light);
      }

      /* Benefits Section */
      .benefits {
          padding: 80px 0;
          background-color: var(--background-alt);
      }

      .benefits .container {
          display: flex;
          align-items: center;
          gap: 50px;
      }

      .benefits-content {
          flex: 1;
      }

      .benefits-content .section-title {
          text-align: left;
          margin-bottom: 30px;
      }

      .benefits-list {
          margin-bottom: 30px;
      }

      .benefits-list li {
          margin-bottom: 15px;
          position: relative;
          padding-left: 30px;
      }

      .benefits-list li::before {
          content: "âœ“";
          position: absolute;
          left: 0;
          color: var(--success-color);
          font-weight: bold;
      }

      .benefits-image {
          flex: 1;
          border-radius: 10px;
          overflow: hidden;
          box-shadow: var(--shadow);
      }

      /* About Section */
      .about {
          padding: 80px 0;
          background-color: var(--background-color);
      }

      .about-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
          gap: 30px;
      }

      .about-card {
          background-color: var(--primary-light);
          border-radius: 8px;
          padding: 30px;
          transition: var(--transition);
      }

      .about-card:hover {
          transform: translateY(-5px);
          box-shadow: var(--shadow);
      }

      .about-card h3 {
          font-size: 1.3rem;
          margin-bottom: 15px;
          color: var(--primary-color);
      }

      .about-card p {
          color: var(--text-light);
      }

      /* Contact Section */
      .contact {
          padding: 80px 0;
          background-color: var(--background-alt);
      }

      .contact-wrapper {
          display: flex;
          gap: 50px;
      }

      .contact-form {
          flex: 1;
          background-color: white;
          padding: 40px;
          border-radius: 8px;
          box-shadow: var(--shadow);
      }

      .form-group {
          margin-bottom: 20px;
      }

      .form-group label {
          display: block;
          margin-bottom: 8px;
          font-weight: 500;
      }

      .form-group input,
      .form-group textarea {
          width: 100%;
          padding: 12px;
          border: 1px solid var(--border-color);
          border-radius: 4px;
          font-family: inherit;
          font-size: 1rem;
          transition: var(--transition);
      }

      .form-group input:focus,
      .form-group textarea:focus {
          outline: none;
          border-color: var(--primary-color);
          box-shadow: 0 0 0 2px rgba(0, 102, 204, 0.2);
      }

      .contact-info {
          flex: 1;
          padding: 40px;
      }

      .contact-info h3 {
          font-size: 1.8rem;
          margin-bottom: 20px;
          color: var(--primary-color);
      }

      .contact-info p {
          margin-bottom: 30px;
          color: var(--text-light);
      }

      .info-item {
          margin-bottom: 15px;
      }

      /* Footer */
      footer {
          background-color: #1a1a1a;
          color: white;
          padding: 60px 0 20px;
      }

      .footer-content {
          display: flex;
          justify-content: space-between;
          margin-bottom: 40px;
      }

      .footer-logo h2 {
          font-size: 1.8rem;
          margin-bottom: 10px;
          color: white;
      }

      .footer-logo p {
          color: #b3b3b3;
      }

      .footer-links {
          display: flex;
          gap: 60px;
      }

      .footer-column h3 {
          font-size: 1.2rem;
          margin-bottom: 20px;
          color: white;
      }

      .footer-column ul li {
          margin-bottom: 10px;
      }

      .footer-column ul li a {
          color: #b3b3b3;
          transition: var(--transition);
      }

      .footer-column ul li a:hover {
          color: white;
      }

      .footer-bottom {
          padding-top: 20px;
          border-top: 1px solid #333;
          display: flex;
          justify-content: space-between;
          align-items: center;
      }

      .footer-bottom p {
          color: #b3b3b3;
      }

      .footer-legal {
          display: flex;
          gap: 20px;
      }

      .footer-legal a {
          color: #b3b3b3;
      }

      .footer-legal a:hover {
          color: white;
      }

      /* Responsive Styles */
      @media (max-width: 992px) {
          .hero .container,
          .benefits .container {
              flex-direction: column;
          }
          
          .hero-content,
          .benefits-content {
              text-align: center;
          }
          
          .benefits-content .section-title {
              text-align: center;
          }
          
          .cta-buttons {
              justify-content: center;
          }
          
          .contact-wrapper {
              flex-direction: column;
          }
      }

      @media (max-width: 768px) {
          .section-title {
              font-size: 2rem;
          }
          
          .hero-content h2 {
              font-size: 2.2rem;
          }
          
          .footer-content {
              flex-direction: column;
              gap: 40px;
          }
          
          .footer-links {
              flex-direction: column;
              gap: 30px;
          }
          
          .footer-bottom {
              flex-direction: column;
              gap: 20px;
              text-align: center;
          }
          
          nav {
              position: absolute;
              top: 70px;
              left: 0;
              width: 100%;
              background-color: white;
              padding: 20px;
              box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);
              display: none;
          }
          
          nav.active {
              display: block;
          }
          
          nav ul {
              flex-direction: column;
              gap: 15px;
          }
          
          .menu-toggle {
              display: flex;
          }
          
          .menu-toggle.active span:nth-child(1) {
              transform: rotate(45deg) translate(5px, 5px);
          }
          
          .menu-toggle.active span:nth-child(2) {
              opacity: 0;
          }
          
          .menu-toggle.active span:nth-child(3) {
              transform: rotate(-45deg) translate(5px, -5px);
          }
      }

      @media (max-width: 576px) {
          .hero {
              padding: 120px 0 60px;
          }
          
          .hero-content h2 {
              font-size: 1.8rem;
          }
          
          .hero-content p {
              font-size: 1rem;
          }
          
          .cta-buttons {
              flex-direction: column;
              gap: 15px;
          }
          
          .section-title {
              font-size: 1.8rem;
              margin-bottom: 2rem;
          }
          
          .features,
          .benefits,
          .about,
          .contact {
              padding: 60px 0;
          }
      }

      /* Update Schedule Content Styles - MODIFIED */
      /* Prevent body shift when popup is open */
      body.popup-open {
          overflow: hidden;
          padding-right: 17px;
      }

      .popup {
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background-color: rgba(0, 0, 0, 0.5);
          display: flex;
          justify-content: center;
          align-items: center;
          z-index: 1000;
      }

      .popup-content {
          background-color: #fff;
          padding: 15px;
          border-radius: 8px;
          width: 350px;
          box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
          position: relative;
      }

      .hidden {
          display: none;
      }

      /* MODIFIED: Update schedule content to use full width */
      .update-schedule-content {
    font-family: 'Inter', sans-serif;
    background-color: #f5f7fa;
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    min-height: calc(100vh - var(--header-height));
    width: calc(100% - var(--sidebar-width)); /* Adjust width */
    margin-left: var(--sidebar-width); /* Shift to the right */
}

      /* MODIFIED: Adjusted main content to fill available space */
      .update-schedule-content .main-content {
          width: 100%;
          flex: 1;
          padding: 20px;
          display: flex;
          justify-content: flex-start;
          align-items: flex-start;
          min-height: calc(100vh - var(--header-height));
          box-sizing: border-box;
          margin: 0;
      }

      /* MODIFIED: Fixed sidebar interaction with main content */
      .sidebar:not(.active) ~ .main-content {
          width: 100%;
          margin-left: 0;
      }

      .sidebar.active ~ .main-content {
          margin-left: var(--sidebar-width);
          width: calc(100% - var(--sidebar-width));
      }

      /* MODIFIED: Container with full width and proper padding */
      .update-schedule-content .container {
          width: 100%;
          max-width: 1200px;
          padding: 20px;
          background-color: #fff;
          box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
          border-radius: 8px;
          margin: 0;
          min-height: 500px;
          display: flex;
          flex-direction: column;
          justify-content: flex-start;
          align-items: center;
          box-sizing: border-box;
      }

      .update-schedule-content h2 {
          text-align: center;
          color: var(--primary-color);
          font-size: 1.3rem;
          font-weight: 600;
          margin-bottom: 15px;
      }

      .update-schedule-content .grid-container {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
          gap: 15px;
          margin-top: 15px;
          width: 100%;
          text-align: center;
          min-height: 0;
      }

      .update-schedule-content .bus-card {
          background-color: #fff;
          border: 1px solid var(--border-color);
          border-radius: 8px;
          padding: 10px;
          box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
          transition: transform 0.3s ease;
      }

      .update-schedule-content .bus-card:hover {
          transform: translateY(-5px);
      }

      .update-schedule-content .card-content {
          display: flex;
          align-items: center;
          justify-content: space-between;
      }

      .update-schedule-content .info-actions {
          width: 50%;
          display: flex;
          flex-direction: column;
          justify-content: space-between;
      }

      .update-schedule-content .transport-info {
          text-align: left;
          padding-left: 8px;
      }

      .update-schedule-content .transport-info h3 {
          font-size: 1rem;
          font-weight: 600;
          margin: 0 0 4px 0;
          color: var(--text-color);
      }

      .update-schedule-content .transport-info p {
          font-size: 0.8rem;
          color: var(--text-light);
          margin: 0 0 4px 0;
      }

      .update-schedule-content .actions {
          display: flex;
          justify-content: flex-end;
          margin-top: 8px;
      }

      .update-schedule-content .actions .update-btn,
      .update-schedule-content .actions .delete-btn {
          width: 70px;
          padding: 6px 8px;
          border-radius: 4px;
          cursor: pointer;
          text-align: center;
          box-sizing: border-box;
          margin: 0;
          font-weight: 500;
          font-size: 0.8rem;
      }

      .update-schedule-content .actions .update-btn {
          background-color: var(--primary-color);
          color: #fff;
          border: none;
          margin-right: 8px;
      }

      .update-schedule-content .actions .update-btn:hover {
          background-color: var(--primary-dark);
      }

      .update-schedule-content .actions .delete-btn {
          background-color: var(--status-red);
          color: #fff;
          border: none;
      }

      .update-schedule-content .actions .delete-btn:hover {
          background-color: #c82333;
      }

      .update-schedule-content .popup {
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background-color: rgba(0, 0, 0, 0.5);
          display: flex;
          justify-content: center;
          align-items: center;
      }

      .update-schedule-content .popup-content {
          background-color: #fff;
          padding: 15px;
          border-radius: 8px;
          width: 350px;
          box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      }

      .update-schedule-content .popup-content h2 {
          font-size: 1.1rem;
          margin-bottom: 12px;
      }

      .update-schedule-content .hidden {
          display: none;
      }

      .update-schedule-content input, .update-schedule-content button {
          margin: 4px 0;
          padding: 6px 8px;
          border: 1px solid var(--border-color);
          border-radius: 4px;
          width: 100%;
          box-sizing: border-box;
          font-family: 'Inter', sans-serif;
          font-size: 0.9rem;
      }

      .update-schedule-content #saveBtn {
          background-color: var(--success-color);
          color: #fff;
          width: auto;
      }

      .update-schedule-content #cancelBtn {
          background-color: var(--status-red);
          color: #fff;
          width: auto;
      }

      .update-schedule-content #saveBtn:hover {
          background-color: #218838;
      }

      .update-schedule-content #cancelBtn:hover {
          background-color: #c82333;
      }

      .update-schedule-content .additional-content {
          display: flex;
          flex-wrap: wrap;
          gap: 15px;
          margin-top: 20px;
          width: 100%;
      }

      .update-schedule-content .rules-section, .update-schedule-content .chart-section {
          flex: 1;
          min-width: 250px;
          background-color: #fff;
          border-radius: 8px;
          box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
          padding: 15px;
      }

      .update-schedule-content .rules-section h3 {
          color: var(--primary-color);
          font-size: 1.1rem;
          font-weight: 600;
          margin-bottom: 12px;
          border-bottom: 2px solid var(--primary-light);
          padding-bottom: 4px;
      }

      .update-schedule-content .rules-section ul {
          list-style: none;
          padding: 0;
          margin: 0;
      }

      .update-schedule-content .rules-section ul li {
          display: flex;
          align-items: flex-start;
          margin-bottom: 12px;
          font-size: 0.8rem;
          color: var(--text-color);
      }

      .update-schedule-content .rules-section ul li i {
          color: var(--primary-color);
          margin-right: 8px;
          font-size: 0.9rem;
          margin-top: 2px;
      }

      .update-schedule-content .chart-section h3 {
          color: var(--primary-color);
          font-size: 1.1rem;
          font-weight: 600;
          margin-bottom: 12px;
      }

      .update-schedule-content .chart-container {
          position: relative;
          height: 200px;
      }
  </style>
</head>
<body>
  <div class="dashboard-container">
      <!-- Sidebar -->
      <aside class="sidebar">
        <div class="sidebar-header">
            <h1>TrafficIQ</h1>
            <span class="admin-badge">Admin</span>
        </div>
        <nav class="sidebar-nav">
            <ul>
                <li class="active">
                    <a href="admin-dashboard.html">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                        <span>Dashboard</span>
                    </a>
                </li>
                <li>
                    <a href="system-management.html">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 1-1.73 1H.18a2 2 0 0 0-2 2v.44a2 2 0 0 0 2 2h.18a2 2 0 0 1 1.73 1l.25.43a2 2 0 0 1 0 2l-.08.15a2 2 0 0 0 .73 2.73l.38.22a2 2 0 0 1 1 1.73V21.82a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 1 1.73-1h.18a2 2 0 0 0 2-2v-.44a2 2 0 0 0-2-2h-.18a2 2 0 0 1-1.73-1l-.25-.43a2 2 0 0 1 0-2l.08-.15a2 2 0 0 0-.73-2.73l-.38-.22a2 2 0 0 1-1-1.73V4.18a2 2 0 0 0-2-2z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                        <span>System Management</span>
                    </a>
                </li>
                <li>
                    <a href="user-management.html">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M22 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
                        <span>Parking Dashboard</span>
                    </a>
                </li>
                <li>
                    <a href="camera-management.html">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon"><path d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"></path><circle cx="12" cy="13" r="3"></circle></svg>
                        <span>Bus Scheduling</span>
                    </a>
                </li>
                <li>
                    <a href="signal-management.html">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon"><rect width="10" height="20" x="7" y="2" rx="2"></rect><circle cx="12" cy="7" r="2"></circle><circle cx="12" cy="12" r="2"></circle><circle cx="12" cy="17" r="2"></circle></svg>
                        <span>Penalty System</span>
                    </a>
                </li>
                <li>
                    <a href="penalty-management.html">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon"><circle cx="12" cy="12" r="10"></circle><path d="m15 9-6 6"></path><path d="m9 9 6 6"></path></svg>
                        <span>School Zone speed</span>
                    </a>
                </li>
                <li>
                    <a href="real-time-alerts.html">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon"><path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"></path><path d="M10.3 21a1.94 1.94 0 0 0 3.4 0"></path></svg>
                        <span>Real-Time Alerts</span>
                    </a>
                </li>
                <li>
                    <a href="reports.html">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><path d="M14 2v6h6"></path><path d="M16 13H8"></path><path d="M16 17H8"></path><path d="M10 9H8"></path></svg>
                        <span>Reports & Analytics</span>
                    </a>
                </li>
            </ul>
        </nav>
        <div class="sidebar-footer">
            <a href="#" class="user-profile">
                <div class="avatar admin">AD</div>
                <div class="user-info">
                    <h4>Admin User</h4>
                    <p>System Administrator</p>
                </div>
            </a>
            <a href="../login.html" class="logout-btn">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" x2="9" y1="12" y2="12"></line></svg>
                <span>Logout</span>
            </a>
        </div>
    </aside>

      <main class="main-content">
          <header class="dashboard-header">
              <div class="menu-toggle">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <line x1="4" x2="20" y1="12" y2="12"></line>
                      <line x1="4" x2="20" y1="6" y2="6"></line>
                      <line x1="4" x2="20" y1="18" y2="18"></line>
                  </svg>
              </div>
              <h2>Speed Monitoring</h2>
              <div class="header-actions">
                  <div class="search-bar">
                      <input type="text" placeholder="Search...">
                      <button>
                          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                              <circle cx="11" cy="11" r="8"></circle>
                              <path d="m21 21-4.3-4.3"></path>
                          </svg>
                      </button>
                  </div>
                  <button class="notification-btn">
                      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                          <path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"></path>
                          <path d="M10.3 21a1.94 1.94 0 0 0 3.4 0"></path>
                      </svg>
                      <span class="badge">5</span>
                  </button>
              </div>
          </header>
          <div class="dashboard-content" style="margin: right;">
              <!-- Integrated Update Schedule Content -->
              <div class="update-schedule-content" >
                  <!-- Main Content -->
                  <div class="main-content" >
                      <div class="container">
                          <h2>Update Transport Schedule</h2>
                          <div id="busGrid" class="grid-container">
                              <div class="placeholder" style="text-align: center; color: var(--text-light); font-size: 0.8rem; padding: 15px;">
                                  No bus schedules available. Please add a schedule.
                              </div>
                          </div>

                          <div class="additional-content">
                              <div class="rules-section">
                                  <h3>Transport Rules for Admins</h3>
                                  <ul>
                                      <li><i class="fas fa-check-circle"></i> Ensure all bus schedules are updated at least 24 hours before departure to avoid passenger confusion.</li>
                                      <li><i class="fas fa-check-circle"></i> Verify that each bus has a valid permit and safety certification before scheduling.</li>
                                      <li><i class="fas fa-check-circle"></i> Maintain a minimum gap of 15 minutes between consecutive departures from the same pickup location.</li>
                                      <li><i class="fas fa-check-circle"></i> Regularly update the system with driver availability to prevent scheduling conflicts.</li>
                                      <li><i class="fas fa-check-circle"></i> Monitor fuel levels and maintenance schedules to ensure buses are operational before trips.</li>
                                  </ul>
                              </div>

                              <div class="chart-section">
                                  <h3>Update & Deletion Trends</h3>
                                  <div class="chart-container">
                                      <canvas id="updateDeleteChart"></canvas>
                                  </div>
                              </div>
                          </div>
                      </div>
                  </div>

                  <!-- Popup for Edit Schedule -->
                  <div id="editPopup" class="popup hidden">
                      <div class="popup-content">
                          <h2>Edit Schedule</h2>
                          <form id="scheduleForm">
                              <label for="vehicleNo">Vehicle No:</label>
                              <input type="text" id="vehicleNo" readonly><br>

                              <label for="pickup">Pickup Location:</label>
                              <input type="text" id="pickup" required><br>

                              <label for="drop">Drop Location:</label>
                              <input type="text" id="drop" required><br>

                              <label for="time">Time:</label>
                              <input type="time" id="time" required><br>

                              <button type="button" id="saveBtn">Save Changes</button>
                              <button type="button" id="cancelBtn">Cancel</button>
                          </form>
                      </div>
                  </div>

                  <!-- JavaScript -->
                  <script>
                      let updateHistory = JSON.parse(localStorage.getItem('updateHistory')) || [];
                      let deleteHistory = JSON.parse(localStorage.getItem('deleteHistory')) || [];

                      async function fetchSchedules() {
                          try {
                              const response = await fetch("http://localhost:3000/api/bus");
                              const schedules = await response.json();

                              const busGrid = document.getElementById("busGrid");
                              busGrid.innerHTML = ""; // Clear the grid

                              if (schedules.length > 0) {
                                  schedules.forEach((bus) => {
                                      const card = document.createElement("div");
                                      card.classList.add("bus-card");

                                      card.innerHTML = `
                                      <div class="bus-card" style="margin: centre; text-align: center;">
                                          <div class="card-content">
                                              <div class="info-actions" style="display: flex;width: 90%;">
                                                  <div class="transport-info" style="margin-bottom: 8px;">
                                                      <h3>${bus.vehicleNo}</h3>
                                                      <p>Pickup: ${bus.pickup || 'N/A'}</p>
                                                      <p>Drop: ${bus.drop || 'N/A'}</p>
                                                      <p>Time: ${bus.time}</p>
                                                  </div>
                                                  <div class="actions" style="display: flex; justify-content: center; gap: 8px;">
                                                      <button class="update-btn" data-id="${bus._id}" data-vehicle="${bus.vehicleNo}" 
                                                              data-pickup="${bus.pickup}" data-drop="${bus.drop}" data-time="${bus.time}">
                                                          Update
                                                      </button>
                                                      <button class="delete-btn" onclick="deleteSchedule('${bus._id}')">Delete</button>
                                                  </div>
                                              </div>
                                          </div>
                                      </div>
                                      `;

                                      busGrid.appendChild(card);
                                  });
                              }

                              document.querySelectorAll('.update-btn').forEach(button => {
                                  button.addEventListener('click', function() {
                                      showEditForm(
                                          this.getAttribute('data-id'),
                                          this.getAttribute('data-vehicle'),
                                          this.getAttribute('data-pickup'),
                                          this.getAttribute('data-drop'),
                                          this.getAttribute('data-time')
                                      );
                                  });
                              });

                              updateChart();

                          } catch (error) {
                              console.error("Error fetching schedules:", error);
                          }
                      }

                      function showEditForm(id, vehicleNo, pickup, drop, time) {
                          document.getElementById("editPopup").classList.remove("hidden");

                          document.getElementById("vehicleNo").value = vehicleNo;
                          document.getElementById("pickup").value = pickup;
                          document.getElementById("drop").value = drop;
                          document.getElementById("time").value = time;

                          document.getElementById("saveBtn").onclick = () => updateSchedule(id);
                          document.getElementById("cancelBtn").onclick = () => document.getElementById("editPopup").classList.add("hidden");
                      }

                      async function updateSchedule(id) {
                          const updatedData = {
                              vehicleNo: document.getElementById("vehicleNo").value,
                              pickup: document.getElementById("pickup").value,
                              drop: document.getElementById("drop").value,
                              time: document.getElementById("time").value,
                          };

                          try {
                              const response = await fetch(`http://localhost:3000/api/bus/${id}`, {
                                  method: "PUT",
                                  headers: { "Content-Type": "application/json" },
                                  body: JSON.stringify(updatedData),
                              });

                              if (response.ok) {
                                  alert("Schedule updated successfully!");
                                  fetchSchedules();
                                  document.getElementById("editPopup").classList.add("hidden");

                                  let updateCount = parseInt(localStorage.getItem('updateCount')) || 0;
                                  updateCount++;
                                  localStorage.setItem('updateCount', updateCount);

                                  updateHistory.push({ timestamp: new Date().toISOString(), count: updateCount });
                                  localStorage.setItem('updateHistory', JSON.stringify(updateHistory));
                              } else {
                                  const errorData = await response.json();
                                  alert(`Failed to update schedule: ${errorData.message || 'Unknown error'}`);
                              }
                          } catch (error) {
                              console.error("Error updating schedule:", error);
                          }
                      }

                      async function deleteSchedule(id) {
                          if (!confirm("Are you sure you want to delete this schedule?")) return;

                          try {
                              const response = await fetch(`http://localhost:3000/api/bus/${id}`, {
                                  method: "DELETE",
                              });

                              if (response.ok) {
                                  alert("Schedule deleted successfully!");
                                  fetchSchedules();

                                  let deleteCount = parseInt(localStorage.getItem('deleteCount')) || 0;
                                  deleteCount++;
                                  localStorage.setItem('deleteCount', deleteCount);

                                  deleteHistory.push({ timestamp: new Date().toISOString(), count: deleteCount });
                                  localStorage.setItem('deleteHistory', JSON.stringify(deleteHistory));
                              } else {
                                  alert("Failed to delete schedule.");
                              }
                          } catch (error) {
                              console.error("Error deleting schedule:", error);
                          }
                      }

                      function updateChart() {
                          const ctx = document.getElementById('updateDeleteChart').getContext('2d');

                          const labels = [];
                          const updateData = [];
                          const deleteData = [];

                          const allEvents = [
                              ...updateHistory.map(event => ({ ...event, type: 'update' })),
                              ...deleteHistory.map(event => ({ ...event, type: 'delete' }))
                          ].sort((a, b) => new Date(a.timestamp) - new Date(b.timestamp));

                          allEvents.forEach(event => {
                              const date = new Date(event.timestamp);
                              const label = `${date.getHours()}:${date.getMinutes()}:${date.getSeconds()}`;
                              labels.push(label);

                              if (event.type === 'update') {
                                  updateData.push(event.count);
                                  deleteData.push(deleteData.length > 0 ? deleteData[deleteData.length - 1] : 0);
                              } else {
                                  deleteData.push(event.count);
                                  updateData.push(updateData.length > 0 ? updateData[updateData.length - 1] : 0);
                              }
                          });

                          if (labels.length === 0) {
                              labels.push('No Data');
                              updateData.push(0);
                              deleteData.push(0);
                          }

                          new Chart(ctx, {
                              type: 'line',
                              data: {
                                  labels: labels,
                                  datasets: [
                                      {
                                          label: 'Updates',
                                          data: updateData,
                                          borderColor: '#28a745',
                                          backgroundColor: 'rgba(40, 167, 69, 0.1)',
                                          borderWidth: 2,
                                          fill: true,
                                          tension: 0.4
                                      },
                                      {
                                          label: 'Deletions',
                                          data: deleteData,
                                          borderColor: '#dc3545',
                                          backgroundColor: 'rgba(220, 53, 69, 0.1)',
                                          borderWidth: 2,
                                          fill: true,
                                          tension: 0.4
                                      }
                                  ]
                              },
                              options: {
                                  responsive: true,
                                  maintainAspectRatio: false,
                                  plugins: {
                                      legend: {
                                          position: 'top',
                                      },
                                      tooltip: {
                                          mode: 'index',
                                          intersect: false,
                                      }
                                  },
                                  scales: {
                                      y: {
                                          beginAtZero: true,
                                          title: {
                                              display: true,
                                              text: 'Count'
                                          }
                                      },
                                      x: {
                                          title: {
                                              display: true,
                                              text: 'Time'
                                          }
                                      }
                                  }
                              }
                          });
                      }

                      window.onload = fetchSchedules;

                      document.querySelector('.menu-toggle').addEventListener('click', function() {
                          document.querySelector('.sidebar').classList.toggle('active');
                      });
                  </script>
              </div>
          </div>
      </main>
  </div>
</body>
</html>

