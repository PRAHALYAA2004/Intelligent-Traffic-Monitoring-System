<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Real-Time Traffic Alerts</title>
  <link rel="stylesheet" href="/css/real-time-alerts.css" />
  <!-- Select2 CSS for enhanced dropdowns -->
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
  
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.0/socket.io.min.js"></script>
  <!-- Select2 JS -->
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
</head>
<body>
  <div class="container">
    <header>
      <h1>Real-Time Traffic Alerts</h1>
      <!-- Origin and Destination dropdowns -->
      <select id="originSearch">
        <option value="">Select Origin</option>
        <option value="Delhi">Delhi</option>
        <option value="Mumbai">Mumbai</option>
        <option value="Bengaluru">Bengaluru</option>
        <option value="Chennai">Chennai</option>
        <option value="Kolkata">Kolkata</option>
        <option value="Hyderabad">Hyderabad</option>
        <option value="Ahmedabad">Ahmedabad</option>
        <option value="Pune">Pune</option>
        <option value="Jaipur">Jaipur</option>
        <option value="Surat">Surat</option>
        <option value="Lucknow">Lucknow</option>
        <option value="Indore">Indore</option>
        <option value="Chandigarh">Chandigarh</option>
        <option value="Nagpur">Nagpur</option>
        <option value="Vadodara">Vadodara</option>
        <!-- Add more cities as needed -->
      </select>

      <select id="destinationSearch">
        <option value="">Select Destination</option>
        <option value="Delhi">Delhi</option>
        <option value="Mumbai">Mumbai</option>
        <option value="Bengaluru">Bengaluru</option>
        <option value="Chennai">Chennai</option>
        <option value="Kolkata">Kolkata</option>
        <option value="Hyderabad">Hyderabad</option>
        <option value="Ahmedabad">Ahmedabad</option>
        <option value="Pune">Pune</option>
        <option value="Jaipur">Jaipur</option>
        <option value="Surat">Surat</option>
        <option value="Lucknow">Lucknow</option>
        <option value="Indore">Indore</option>
        <option value="Chandigarh">Chandigarh</option>
        <option value="Nagpur">Nagpur</option>
        <option value="Vadodara">Vadodara</option>
        <!-- Add more cities as needed -->
      </select>

      <!-- Search button to trigger the route display -->
      <button id="searchBtn">Search Route</button>
    </header>

    <section class="alert-section">
      <h2>Current Alerts</h2>
      <div class="alert-list" id="alertList">
        <!-- Real-time alerts will be injected here -->
      </div>
    </section>

    <section class="map-section">
      <h2>Map of Incidents</h2>
      <div id="map" style="height: 400px;"></div>
    </section>

    <section class="suggestions-section">
      <h2>Suggested Routes</h2>
      <ul id="suggestedRoutes"></ul>
    </section>
  </div>

  <script src="/js/real-time-alerts.js"></script>
  <script>
    // Enhance the select elements using Select2 so that they become searchable
    $(document).ready(function() {
      $('#originSearch').select2({
        placeholder: "Select Origin",
        width: 'resolve'
      });
      $('#destinationSearch').select2({
        placeholder: "Select Destination",
        width: 'resolve'
      });
    });

    // Wait until the DOM is fully loaded
    document.addEventListener("DOMContentLoaded", function () {
      // Add a click event listener to the search button
      document.getElementById("searchBtn").addEventListener("click", function () {
        // Retrieve the selected values from the dropdowns
        const origin = document.getElementById("originSearch").value;
        const destination = document.getElementById("destinationSearch").value;

        // Check if both fields have values
        if (origin === "" || destination === "") {
          alert("Please select both an origin and a destination.");
          return;
        }

        // Construct the Google Maps Directions URL.
        // Use encodeURIComponent to handle any spaces or special characters.
        const mapsUrl = `https://www.google.com/maps/dir/${encodeURIComponent(origin)}/${encodeURIComponent(destination)}`;

        // Open the URL in a new tab
        window.open(mapsUrl, "_blank");
      });
    });
  </script>
</body>
</html>
